# Assignment: INSPIREHEP Search & Summarization Web App

## Overview
You are tasked with building a simple web application that allows users to search for high-energy physics papers using the INSPIREHEP REST API and receive a summary generated by the OpenAI API and the list of results. The application should consists of a Django backend and a React frontend.

## Questions
If you have any questions, please reach out to sis-exercise-2024@cern.ch

## Submission Guidelines

Create a GitHub repository to showcase your work. Ensure each commit includes a clear message describing the changes. Submit the repository link by the deadline to sis-exercise-2024@cern.ch. Late submissions will not be considered. Include a README.md file with:
* Setup instructions to run the application locally.
* Any dependencies or prerequisites.
* Notes on any assumptions or shortcuts taken due to time constraints.


## Time Constraint
* Expected duration: Approximately 3-4 hours.
* Focus on core functionality over extensive features or optimizations.

## Key Objectives:
### Django Backend:
* Create a Celery task that harvest everyday the INSPIREHEP REST API and gets the first 40 papers and save them in this application.
* Create an endpoint that accepts a search query from the frontend.
* Use the stored data to get results based on the query.
* Summarize the search results using the OpenAI API.
* Return the summarized information and the list of results to the frontend.

### React Frontend:
* Build a user interface with a search bar for inputting queries.
* Display the summarized search results received from the backend.

#### Create a task description for the following request:
* The product owner wants to have metrics about the OPENAI API response time and the most common user queries.
    *  Create an issue for this task that you will give to your team to solve, please be specific.
       in the implementation.
    * OPTIONAL: Implement your suggestion.

## Example Case

Example Workflow
1. User Interaction:
    * User enters "quantum entanglement" into the search bar and clicks "Search".
2. Frontend Request:
    * React app sends a request to /api/search/ with the query parameter.
3. Backend Processing:
    * Django view receives the query.
    * Retrieves results from ElasticSearch for "quantum entanglement".
    * Extracts titles and abstracts from the top results.
    * Summarizes the information using the OpenAI API or a mock function.
4. Response:
    * Django returns the results and summary to the React app.
5. Displaying Results:
    * React app displays the summary to the user.

## Evaluation Criteria

* Functionality:
    * The application meets the specified requirements.
    * The application is running with the given instructions
    * Users can perform a search and view summarized results.


* Technical Competence:
    * Effective use of React and Django.
    * Proper integration with external APIs or appropriate mocking.

* User Experience:
    * The interface is intuitive.
    * Appropriate feedback during loading and error states.

## Prerequisites

- Docker
- Docker-compose

## Detailed Requirements

### Backend (Django)
1. Setup
    * The django app is already setup to save you time, you can run it:
    ```bash
        make up
        make bootstrap
        # visit localhost:8000
        # user: admin
        # password: admin
    ```

2. API Endpoint
    * Endpoint Creation:
        * Define an endpoint (e.g., /api/search/) that accepts a GET or POST request with a search query parameter
            * You should use Elasticsearch results
            * Return results and summary with response
            * Pagination 10 results per page

3. INSPIREHEP API Integration
    * Fetch Search Results:
        * Receive the search query from the frontend.
    * Use the INSPIREHEP REST API to perform a literature search based on the query.
        * API Endpoint: https://inspirehep.net/api/literature
        * Example Query: https://inspirehep.net/api/literature?q=`<your_search_query>`
        * API Documentation: https://github.com/inspirehep/rest-api-doc
4. OpenAI API Integration
    * Summarize Results:
        * Extract relevant information from the INSPIRE-HEP API response (e.g., titles, abstracts).
        * Use the OpenAI API to generate a summary of the top search results.
            * ***Note: If you do not have access to the OpenAI API, you can mock the response for this exercise.***
    * API Call Example:
        * Prompt the OpenAI API with the concatenated abstracts of the top papers and request a concise summary.
5. Response to Frontend
    * Return Data:
        * Send the results and the summarized information back to the React frontend in JSON format.
        * Include any additional relevant data if necessary (e.g., title).
6. Error Handling
        * Handle potential errors from both external APIs (e.g., network issues, rate limits).
        * Return appropriate HTTP status codes and error messages.

### Frontend (React)
1. Setup
    * Project Initialization:
        * Create a new React application using Create React App (or other bootstrapper of choice).
2. User Interface
    * Search Bar:
        * Implement an input field where users can enter their search queries.

3. API Interaction
    * Fetch Summarized Results:
        * On search submission, send the query to the Django backend endpoint.

4. Display Results
    * Summarized Output:
        * Display the summary received from the backend in a readable format.
        * Optionally, show additional information such as the titles of the top papers.

5. User Experience
    * Loading State:
        * Show a loading indicator while awaiting the backend response.
    * Error Handling:
        * Display user-friendly error messages in case of failures.
6. Styling
    * Basic Design:
        * Keep the UI clean and simple.
        * Optionally you can use [Ant Design](https://ant.design/)


## Constraints and Considerations

* API Keys:
    * OpenAI API Key:
        * If you have an API key, you may use it.
        * If not, simulate the summarization by creating a function that returns a placeholder summary.
* Mocking API Responses:
    * If unable to access external APIs due to time constraints or lack of credentials, you can mock the API responses to demonstrate functionality.

* Assumptions:
    * Users are expected to have a modern web browser.
    * No need to support older browsers.


## Suggestions

### Mocking the OpenAI API (If Necessary)
If you cannot use the OpenAI API, you can simulate its behavior:

### Create a Mock Function:

```python

def mock_openai_summarize(text):
    return "This is a summary of the provided search results."
```
### Use the Mock Function:

* Instead of calling the OpenAI API, use the mock function to generate a placeholder summary.


